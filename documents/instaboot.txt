
create new spring initializr project
	group: org.mrpaulwoods
	artifact: instaboot
	type: gradle project
	language: groovy
	packagin: war
	java version: 1.8

	dependencies:
		core: security, devtools
		web: web
		template engines: thymeleaf
		sql: jpa, h2
		ops: Actuator

	ckeck use auto-import


### HELLO WORLD ###

// before 1st successful build, 
// note: comment out the tomcat starter
// note: create first controller and template and css



comment out build.gradle
	// providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')



create org.mrpaulwoods.instaboot.home.HomeController.groovy

	package org.mrpaulwoods.instaboot.home

	import groovy.util.logging.Slf4j
	import org.springframework.stereotype.Controller
	import org.springframework.web.bind.annotation.GetMapping
	import org.springframework.web.bind.annotation.RequestMapping

	@Slf4j
	@Controller
	@RequestMapping
	class HomeController {

	    @GetMapping
	    String index() {
	        "home/index"
	    }
	    
	}



create src/main/resources/templates/home/index.html

	<!DOCTYPE html>

	<html xmlns="http://www.w3.org/1999/xhtml"
	      xmlns:th="http://www.thymeleaf.org">

	<head>
	    <title>Insta Boot</title>
	    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	    <link rel="stylesheet" type="text/css" media="all" href="#" th:href="@{/css/styles.css}"/>
	</head>

	<body>

	<h1>InstaBoot Images</h1>

	</body>

	</html>


create src/main/resources/static/css/styles.css
	- leave it blank


run the app
	user name: user
	password: in the log file




in order to not need to lookup the password from the log everytime, set a hard-coded password

edit src/main/resources/application.properties
security.user.password=password



#### upoad an image, save it, and display it ####

flow:
	from home page, user clicks upload link
	the upload form is displayed
	user selects the file to upload and clicks upload
	app stores the picture in the database
	app redirects to show page, and shows the image.



modify src/main/resources/templates/home/index.html

	<div>
	    <a href="#" th:href="@{/upload}">Upload Image</a>
	</div>


create the upload controller


	package org.mrpaulwoods.instaboot.upload

	import groovy.util.logging.Slf4j
	import org.springframework.stereotype.Controller
	import org.springframework.web.bind.annotation.GetMapping
	import org.springframework.web.bind.annotation.RequestMapping

	@Slf4j
	@Controller
	@RequestMapping("/upload")
	class UploadController {

	    @GetMapping
	    String index() {
	        "upload/index"
	    }

	}


create org.mrpaulwoods.instaboot.upload.UploadController.groovy

	package org.mrpaulwoods.instaboot.upload

	import groovy.util.logging.Slf4j
	import org.springframework.stereotype.Controller
	import org.springframework.web.bind.annotation.GetMapping
	import org.springframework.web.bind.annotation.RequestMapping

	@Slf4j
	@Controller
	@RequestMapping("/upload")
	class UploadController {

	    @GetMapping
	    String index() {
	        "upload/index"
	    }

	}



create src/main/resources/templates/upload/index.html

	<!DOCTYPE html>

	<html xmlns="http://www.w3.org/1999/xhtml"
	      xmlns:th="http://www.thymeleaf.org">

	<head>
	    <title>Insta Boot</title>
	    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	    <link rel="stylesheet" type="text/css" media="all" href="#" th:href="@{/css/styles.css}"/>
	</head>

	<body>

	<h1>Upload Image</h1>

	<div>

	    <form th:action="@{/upload/create}" method="post" enctype="multipart/form-data">

	        <div>
	            <label for="file">Select File</label>
	            <input id="file" type="file" name="content"/>
	        </div>

	        <div>
	            <button>Upload</button>
	        </div>

	    </form>

	</div>

	</body>

	</html>


test the form. we will get a 404 because upload/create was not found.


create a upload form 










create image entity
create image service
create image repository













modify org.mrpaulwoods.instaboot.upload.UploadController.groovy

